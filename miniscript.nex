
/\n/ {
  log.Token("NEWLINE\n")
  log.Trace("Lexed newline")
  log.LineNo++
  return NEWLINE
}

/<script type=\"text\/JavaScript\">/ {
  log.Token("SCRIPT_TAG_START ")
  log.Trace("Lexed start script tag")
  return SCRIPT_TAG_START
}

/<\/script>/ {
  log.Token("SCRIPT_TAG_END ")
  log.Trace("Lexed end script tag")
  return SCRIPT_TAG_END
}

/document\.write/ {
  log.Token("DOCUMENT_WRITE ")
  log.Trace("Lexed document write function call")
  return DOCUMENT_WRITE
}

/var[ \t]/ {
  log.Token("VARDEF ")
  log.Trace("Lexed var keyword")
  return VARDEF
}

/[ \t]+/ {
  log.Token("")
}

/[0-9]+/ {
  log.Token("INTEGER[" + yylex.Text() + "] ")
  log.Trace("Lexed integer " + yylex.Text())
  value, _ := strconv.Atoi(yylex.Text())
  lval.N = &ast.Integer{Value: value}
  return INTEGER
}

/[A-Za-z][A-Za-z0-9\.]*/ {
  log.Token("IDENTIFIER[" + yylex.Text() + "] ")
  log.Trace("Lexed identifier " + yylex.Text())
  lval.N = &ast.Variable{VariableName: yylex.Text()}
  return IDENTIFIER
}

/\"(\\.|[^\\"\n])*\"/ {
  log.Token("STRING[" + yylex.Text() + "] ")
  log.Trace("Lexed string " + yylex.Text())
  lval.N = &ast.String{Value: yylex.Text()[1:len(yylex.Text())-1]}
  return STRING
}

/=/ {
  log.Token("EQUAL ")
  log.Trace("Lexed equal sign")
  return EQUAL
}

/{/ {
  log.Token("LBRACE ")
  log.Trace("Lexed left brace")
  return LBRACE
}

/}/ {
  log.Token("RBRACE ")
  log.Trace("Lexed right brace")
  return RBRACE
}

/\(/ {
  log.Token("LPAREN ")
  log.Trace("Lexed left paren")
  return LPAREN
}

/\)/ {
  log.Token("RPAREN ")
  log.Trace("Lexed right paren")
  return RPAREN
}

/,/ {
  log.Token("COMMA ")
  log.Trace("Lexed comma")
  return COMMA
}

/\+/ {
  log.Token("PLUS ")
  log.Trace("Lexed plus")
  return PLUS
}

/-/ {
  log.Token("MINUS ")
  log.Trace("Lexed minus")
  return MINUS
}

/\*/ {
  log.Token("MULT ")
  log.Trace("Lexed mult")
  return MULT
}

/\// {
  log.Token("DIVIDE ")
  log.Trace("Lexed divide")
  return DIVIDE
}

/:/ {
  log.Token("COLON ")
  log.Trace("Lexed colon")
  return COLON
}

/;/ {
  log.Token("SEMICOLON ")
  log.Trace("Lexed semicolon")
  return SEMICOLON
}

/./ {
  return int(yylex.Text()[0])
}

//

package main

import (
  "fmt"
  "os"
  "strconv"
  "mhoc.co/msp/ast"
  "mhoc.co/msp/log"
)
